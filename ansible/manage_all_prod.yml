
---

-
  hosts: prod-pdfgenerator
  serial: 1
  remote_user: miles2
  vars:
      appfolderMap: {"im-ui":"InvoiceManagerUI","im-pdfgenerator":"PDFGenerator","im-preprocessor":"Preprocessor"}
  tasks:
    - include: stopapp.yml app=im-pdfgenerator

    - include: site.yml app=im-pdfgenerator

    - include: startapp.yml app=im-pdfgenerator

-
  hosts: prod-ui
  serial: 1
  remote_user: miles2
  vars:
      appfolderMap: {"im-ui":"InvoiceManagerUI","im-pdfgenerator":"PDFGenerator","im-preprocessor":"Preprocessor"}
  tasks:
    - include: stopapp.yml app=im-ui

    - include: site.yml app=im-ui

    - include: startapp.yml app=im-ui


-
  hosts: prod-preprocessor
  remote_user: miles2
  vars:
      appfolderMap: {"im-ui":"InvoiceManagerUI","im-pdfgenerator":"PDFGenerator","im-preprocessor":"Preprocessor"}
  tasks:
    - include: stopapp.yml app={{ line_item }}
      with_items:
        - im-preprocessor
      loop_control:
        loop_var: line_item

    - include: site.yml app={{ item }}
      with_items:
        - im-preprocessor

    - include: startapp.yml app={{ line_item2 }}
      with_items:
        - im-preprocessor
      loop_control:
        loop_var: line_item2






