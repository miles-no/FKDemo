<div class="manage-brands" ng-controller="listCtrl" ng-init="getLayouts();">
    <div class="col-md-12">
        <table st-table="displayedCollection" st-safe-src="allLayouts" class="table table-align">
            <thead>
            <tr>
                <th>Brand</th>
                <th>Layout Name</th>
                <th>Layout Description</th>
                <th>Version</th>
                <th>Rules Attached</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat-start = "layoutItem in displayedCollection" ng-click="updateTemplate(layoutItem)">
                <td>{{layoutItem.brand}}</td>
                <td>{{layoutItem.name}}</td>
                <td>{{layoutItem.description}}</td>
                <td>{{layoutItem.version}}</td>
                <td ng-class="{'disabled' : layoutItem.layoutRule.layoutRuleMapList.length==0}"><a ng-click="dropDownList($event,layoutItem)">{{layoutItem.layoutRule.layoutRuleMapList.length}}</a></td>
                <td ng-show="dropDown === layoutItem"><i class="fa fa-caret-up"></i></td>
            </tr>
            <tr ng-repeat-end ng-if="dropDown === layoutItem">
                <td  colspan="5" class="table-padding">
                    <table class="table table-striped table-sm table-dropdown">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Operation</th>
                            <th>Value</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat ="eachRule in layoutItem.layoutRule.layoutRuleMapList">
                            <td>{{eachRule.name}}</td>
                            <td>{{eachRule.operation}}</td>
                            <td>{{eachRule.value}}</td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            </tbody>
        </table>
        <div class="text-right">
            <button ng-click="addTemplate()" class="btn btn-primary">Add Template</button><!-- modal opens upon clicking of add brand -->
        </div>
    </div>
</div>