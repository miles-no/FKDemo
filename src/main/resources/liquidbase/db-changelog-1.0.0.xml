<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <property name="autoIncrement" value="true" dbms="mysql"/>
    <property name="autoIncrement" value="true" dbms="hsqldb"/>
    <property name="autoIncrement" value="false" dbms="oracle"/>
    <property name="idInt" value="int" dbms="mysql"/>
    <property name="idInt" value="int" dbms="hsqldb"/>
    <property name="idInt" value="NUMBER(10, 0)" dbms="oracle"/>
    <property name="varchar50" value="varchar(50)" dbms="mysql"/>
    <property name="varchar50" value="varchar(50)" dbms="hsqldb"/>
    <property name="varchar50" value="VARCHAR2(50)" dbms="oracle"/>
    <property name="clob.type" value="clob" dbms="oracle"/>
    <property name="blob.type" value="blob" dbms="oracle"/>
    <property name="timestamp.type" value="timestamp" dbms="oracle"/>


    <changeSet id="1" author="bhavik" logicalFilePath="db.changelog.xml">
        <!-- <createTable tableName="TRANSFERFILE">
             <column name="id" type="${idInt}">
                 <constraints primaryKey="true" nullable="false"/>
             </column>
             <column name="TRANSFERTYPE" type="varchar2(20)"/>
             <column name="BRAND" type="varchar2(10)"/>
             <column name="FILENAME" type="varchar2(255)"/>
             <column name="CREATED" type="${timestamp.type}"/>
             <column name="EKBATCHJOBID" type="number"/>
             <column name="TRANSFERSTATUS" type="varchar2(20)"/>
             <column name="STATUSUPDATED" type="${timestamp.type}"/>
             <column name="FILESIZE" type="number"/>
             <column name="TTRANSFERREDBYTES" type="number"/>
             <column name="FILESTORED" type="${timestamp.type}"/>
             <column name="FILECONTENT" type="${clob.type}"/>
             <column name="UPLOADSTARTED" type="${timestamp.type}"/>
             <column name="UPLOADENDED" type="${timestamp.type}"/>
             <column name="EHF" type="number(1)"/>
             <column name="COMPELLOUPLOADSTARTED" type="${timestamp.type}"/>
             <column name="COMPELLOULOADENDED" type="${timestamp.type}"/>
         </createTable> -->

        <createTable tableName="IM_CONFIG">
            <column name="NAME" type="VARCHAR2(255)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="VALUE" type="VARCHAR2(255)"/>
        </createTable>


        <!-- <createTable tableName="IM_JOBS">
             <column name="id" type="VARCHAR2(255)">
                 <constraints primaryKey="true" nullable="false" />
             </column>
             <column name="OBID" type="NUMBER"/>
             <column name="NAME" type="VARCHAR2(255)"/>
             <column name="JOBCLASS" type="VARCHAR2(255)"/>
             <column name="MANUALALLOWED" type="CHAR(1)"/>
             <column name="EDITALLOWED" type="CHAR(1)"/>
             <column name="SCHEDULE" type="CHAR(1)"/>
             <column name="STATUS" type="VARCHAR2(255)"/>
         </createTable>-->

        <createTable tableName="IM_SYSTEM_BATCH_INPUT">
            <column name="id" type="NUMBER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="TF_ID" type="NUMBER">
                <constraints nullable="true" foreignKeyName="FK_IM_SYSTEM_BATCH_INPUT" references="TRANSFERFILE(ID)"/>
            </column>
            <column name="FILENAME" type="VARCHAR2(255)"/>
            <column name="PAYLOAD" type="${clob.type}"/>
            <column name="STATUS" type="VARCHAR2(20)"/>
            <column name="BRAND" type="VARCHAR2(20)"/>
            <column name="CREATE_TIME" type="${timestamp.type}"/>
            <column name="UPDATE_TIME" type="${timestamp.type}"/>
        </createTable>

        <createTable tableName="IM_SYSTEM_BATCH_INPUT_PAYLOAD">
            <column name="id" type="NUMBER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="SBI_ID" type="NUMBER">
                <constraints nullable="true" foreignKeyName="FK_SBI_PAYLOAD" references="IM_SYSTEM_BATCH_INPUT(ID)"/>
            </column>
            <column name="PAYLOAD" type="${clob.type}"/>
        </createTable>

        <createTable tableName="IM_STATEMENT">
            <column name="id" type="NUMBER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="SI_ID" type="NUMBER">
                <constraints nullable="true" foreignKeyName="FK_IM_STATEMENT" references="IM_SYSTEM_BATCH_INPUT(ID)"/>
            </column>
            <!--<column name="PAYLOAD" type="${clob.type}"/>-->
            <column name="STATUS" type="VARCHAR2(100)"/>
            <column name="STATEMENT_ID" type="VARCHAR2(255)"/>
            <column name="STATEMENT_TYPE" type="VARCHAR2(50)"/>
            <column name="INVOICE_NUMBER" type="VARCHAR2(50)"/>
            <column name="CUSTOMER_ID" type="VARCHAR2(10)"/>
            <column name="ACCOUNT_NUMBER" type="VARCHAR2(10)"/>
            <column name="CREATE_TIME" type="${timestamp.type}"/>
            <column name="UPDATE_TIME" type="${timestamp.type}"/>
            <column name="PDF_ATTACHMENT" type="NUMBER"/>
            <column name="CITY" type="VARCHAR2(50)"/>
            <column name="VERSION" type="NUMBER"/>
            <column name="DISTRIBUTION_METHOD" type="VARCHAR2(50)"/>
            <column name="AMOUNT" type="DECIMAL(20,5)"/>
            <column name="INVOICE_DATE" type="DATE"/>
            <column name="DUE_DATE" type="DATE"/>
        </createTable>

        <createTable tableName="IM_STATEMENT_PAYLOAD">
            <column name="id" type="NUMBER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="STATEMENT_ID" type="NUMBER">
                <constraints nullable="true" foreignKeyName="FK_IM_STATEMENT_PAYLOAD" references="IM_STATEMENT(ID)"/>
            </column>
            <column name="PAYLOAD" type="${clob.type}"/>
        </createTable>


        <createTable tableName="IM_BRAND_CONFIG">
            <column name="id" type="NUMBER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="BRAND" type="VARCHAR2(20)"/>
            <column name="USE_EA_BARCODE" type="CHAR(1)"/>
            <column name="AGREEMENT_NUMBER" type="VARCHAR2(5)"/>
            <column name="SERVICELEVEL" type="CHAR(1)"/>
            <column name="PREFIX_KID" type="VARCHAR2(3)"/>
            <column name="KONTONUMMER" type="VARCHAR2(20)"/>
        </createTable>

        <createTable tableName="IM_TRANSACTION_GROUP">
            <column name="id" type="NUMBER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR2(255)"/>
            <column name="LABEL" type="VARCHAR2(255)"/>
            <column name="TRANSACTION_CATEGORY" type="VARCHAR2(255)"/>
            <column name="BRAND" type="VARCHAR2(20)"/>
        </createTable>

        <createTable tableName="IM_INVOICE_PDFS">
            <column name="id" type="NUMBER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="STATEMENT_ID" type="NUMBER">
                <constraints nullable="true" foreignKeyName="FK_IM_INVOICE_PDFS" references="IM_STATEMENT(ID)"/>
            </column>
            <column name="TYPE" type="VARCHAR2(255)"/>
            <column name="PAYLOAD" type="${blob.type}"/>
        </createTable>

        <createSequence sequenceName="IM_STATEMENT_SEQ" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="IM_BRAND_CONFIG_SEQ" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="IM_EXPORT_SEQ" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="IM_INVOICE_PDFS_SEQ" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="IM_STATEMENT_TEMPLATE_SEQ" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="IM_SYSTEM_BATCH_INPUT_SEQ" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="IM_TRANSACTION_GROUP_SEQ" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="IM_STATEMENT_PAYLOAD_SEQ" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="IM_SBI_PAYLOAD_SEQ" startValue="1" incrementBy="1"/>

    </changeSet>

    <changeSet id="2" author="hemlatha" logicalFilePath="db.changelog.xml">
        <createTable tableName="IM_GRID_CONFIG">
            <column name="id" type="NUMBER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="BRAND" type="VARCHAR2(20)"/>
            <column name="EMAIL" type="VARCHAR2(100)"/>
            <column name="PHONE" type="VARCHAR2(25)"/>
        </createTable>

        <createTable tableName="IM_LAYOUT_CONFIG">
            <column name="id" type="NUMBER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="BRAND" type="VARCHAR2(20)"/>
            <column name="LEGAL_PART_CLASS" type="VARCHAR2(50)"/>
            <column name="ACCOUNT_CATEGORY" type="VARCHAR2(50)"/>
            <column name="DISTRIBUTION_METHOD" type="VARCHAR2(50)"/>
            <column name="CREDIT_LIMIT" type="CHAR(1)"/>
        </createTable>

        <createTable tableName="IM_LAYOUT_PAYLOAD">
            <column name="id" type="NUMBER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="CONFIG_ID" type="NUMBER">
                <constraints nullable="true" foreignKeyName="FK_IM_LAYOUT_PAYLOAD" references="IM_LAYOUT_CONFIG(ID)"/>
            </column>
            <column name="LAYOUT_VERSION" type="NUMBER"/>
            <column name="PAYLOAD" type="${clob.type}"/>
        </createTable>

        <createSequence sequenceName="IM_GRID_CONFIG_SEQ" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="IM_LAYOUT_CONFIG_SEQ" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="IM_LAYOUT_PAYLOAD_SEQ" startValue="1" incrementBy="1"/>
    </changeSet>


</databaseChangeLog>
